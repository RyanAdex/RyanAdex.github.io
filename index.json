[{"authors":null,"categories":null,"content":"This feature can be used for publishing content such as:\n Project or software documentation Online courses Tutorials  The parent folder may be renamed, for example, to docs for project documentation or course for creating an online course.\nTo disable this feature, either delete the parent folder, or set draft = true in the front matter of all its pages.\nAfter renaming or deleting the parent folder, you may wish to update any [[menu.main]] menu links to it in the config.toml.\n","date":1536422400,"expirydate":-62135596800,"kind":"section","lang":"zh","lastmod":1536422400,"objectID":"c3224f3a64174f08aaf31e1f1d16ffd3","permalink":"https://RyanAdex.github.io/tutorial/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/tutorial/","section":"tutorial","summary":"This feature can be used for publishing content such as:\n Project or software documentation Online courses Tutorials  The parent folder may be renamed, for example, to docs for project documentation or course for creating an online course.\nTo disable this feature, either delete the parent folder, or set draft = true in the front matter of all its pages.\nAfter renaming or deleting the parent folder, you may wish to update any [[menu.","tags":null,"title":"Overview","type":"docs"},{"authors":null,"categories":[],"content":"时值我小病在家休养生息，喜欢跳广场舞的外公来寻求我的帮助，他们跳广场舞是将存有歌曲的U盘插到音响上面，而音响大部分都是只能显示歌曲的索引index，不能直接显示歌曲名，所以为了方便他们会在U盘里面对歌曲进行排序。由于音响是寻址按顺序播放，意思就是在U盘里面的歌曲需要一首一首的按顺序复制过去，而且当对U盘歌曲进行增添的时候又需要按照顺序重新复制一遍，可以说相当麻烦。为了将我从这重复的劳动中解放出来，我用go语言写了一个小工具，本来想着分分钟写完，却没想到踩到了坑。 在os包中有一个Rename()函数具有重命名和移动的功能，其函数如下：\nfunc Rename(oldpath, newpath string) error  Rename修改一个文件的名字，移动一个文件。可能会有一些个操作系统特定的限制。\n在windows系统下面使用该函数，oldpath和newpath在同一个磁盘/卷下面能正常使用，可我需要将音乐移动到U盘上，当使用这个函数的时候出现了：\nThe system cannot move the file to a different disk drive.  搜索Github的issues，发现Rename在windows中不能进行跨磁盘/卷操作。 为了实现跨磁盘/卷操作，一种方法是直接调用windows API，于是在windows api docs中搜索到movefileex()函数能够实现该功能，但是在go语言的syscall包中只有movefile()函数，其函数如下：\nfunc MoveFile(from *uint16, to *uint16) (err error)  实现文件移动的函数可以写成：\nfunc movefile(oldpath, newpath string) error { //跨卷移动 from, err := syscall.UTF16PtrFromString(oldpath) if err != nil { return err } to, err := syscall.UTF16PtrFromString(newpath) if err != nil { return err } return syscall.MoveFile(from, to)//windows API }  当我们读取oldpath目录里面的文件时调用io/ioutil包的ReadDir()函数可按照文件夹内的排序方式批量读入文件名，其函数实现如下：\nfunc filenamelist(filepath string) []string { var list []string rd, err := ioutil.ReadDir(filepath) //遍历目录 if err != nil { log.Fatal(err) } for _, fi := range rd { if fi.IsDir() { fmt.Printf(\u0026quot;[%s]is dir\\n\u0026quot;, fi.Name()) } else { list = append(list, fi.Name()) fmt.Println(filepath + fi.Name()) } } return list//返回一个string数组 }  当然也可以普通方式读入文件名然后用sort包进行排序。 下面是完整代码：\npackage main import ( \u0026quot;fmt\u0026quot; \u0026quot;io/ioutil\u0026quot; \u0026quot;log\u0026quot; \u0026quot;os\u0026quot; \u0026quot;syscall\u0026quot; ) func movefile(oldpath, newpath string) error { //跨卷移动 from, err := syscall.UTF16PtrFromString(oldpath) if err != nil { return err } to, err := syscall.UTF16PtrFromString(newpath) if err != nil { return err } return syscall.MoveFile(from, to)//windows API } func filenamelist(filepath string) []string { var list []string rd, err := ioutil.ReadDir(filepath) //遍历目录 if err != nil { log.Fatal(err) } for _, fi := range rd { if fi.IsDir() { fmt.Printf(\u0026quot;[%s]is dir\\n\u0026quot;, fi.Name()) } else { list = append(list, fi.Name()) fmt.Println(filepath + fi.Name()) } } return list } func movefilelist(oldpath, newpath string) { for _, fi := range filenamelist(oldpath) { //移动目录的所有文件 err := movefile(oldpath+fi, newpath+fi) if err != nil { log.Fatal(err) } fmt.Println(fi + \u0026quot;--Move To --\u0026gt;\u0026quot; + newpath + \u0026quot;--OK!\u0026quot;) } } func main() { movefilelist(os.Args[1], os.Args[2]) }  最后在终端中：\nRyan@DESKTO MINGW64 /Go/test (master) $ go run main.go ~/Desktop/music/ /d/ C:/Users/Ryan/Desktop/music/新建文本文档 (2).txt C:/Users/Ryan/Desktop/music/新建文本文档.txt 新建文本文档 (2).txt--Move To --\u0026gt;D:/--OK! 新建文本文档.txt--Move To --\u0026gt;D:/--OK!  有了这个脚本，我今后终于可以愉快的帮助我外公了。\n转载请注明\n","date":1543382926,"expirydate":-62135596800,"kind":"page","lang":"zh","lastmod":1543382926,"objectID":"a137288f40059c00aaaa4b67c9608a21","permalink":"https://RyanAdex.github.io/post/filemove/","publishdate":"2018-11-28T13:28:46+08:00","relpermalink":"/post/filemove/","section":"post","summary":"时值我小病在家休养生息，喜欢跳广场舞的外公来寻求我的帮助，他们跳广场舞是将存有歌曲的U盘插到音响上面，而音响大部分都是只能显示歌曲的索引in","tags":["go","windows"],"title":"go语言 os.Rename() cannot move the file to a different disk drive 怎么办","type":"post"},{"authors":null,"categories":null,"content":" In this tutorial, I\u0026rsquo;ll share my top 10 tips for getting started with Academic:\nTip 1 \u0026hellip;\nTip 2 \u0026hellip;\n","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"zh","lastmod":1536422400,"objectID":"6a451186c775f5f0adb3a0416d0cb711","permalink":"https://RyanAdex.github.io/tutorial/example/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/tutorial/example/","section":"tutorial","summary":"In this tutorial, I\u0026rsquo;ll share my top 10 tips for getting started with Academic:\nTip 1 \u0026hellip;\nTip 2 \u0026hellip;","tags":null,"title":"Example Page","type":"docs"}]